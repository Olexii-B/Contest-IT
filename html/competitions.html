<!DOCTYPE html>
<html class="h-100" data-bs-theme="auto">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <link href="/css/style.css" rel="stylesheet">

    <title>Contest-IT</title>
</head>

<body class="d-flex h-100 text-center text-black" style="background-color: #aebec7;">

    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">

    <!-- навбар -->
    <div id="navbar-container"></div>

    <style>
        .nav-link:hover,
        .nav-link:focus {
            color: #007bff;
            text-decoration: underline;
        }

        .dropdown-menu .dropdown-item:hover,
        .dropdown-menu .dropdown-item:focus {
            background-color: #e9ecef;
            color: #000;
        }

        body{
                display: flex;
                flex-direction: column;
                min-height: 100vh;
            }

        .custom-nav-link {
            margin: 0 10px 0 10px;
        }
    </style>

    <script>
        function getCookie(name) {
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i].trim();
                if (c.indexOf(name + "=") === 0) {
                    return c.substring(name.length + 1, c.length);
                }
            }
            return "";
        }

            function getCookie(name) {
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i].trim();
                if (c.indexOf(name + "=") === 0) {
                    return c.substring(name.length + 1, c.length);
                }
            }
            return "";
        }

        // Отримуємо роль користувача з кукі
        const userRole = getCookie('role'); // роль з кукі
        const userId = getCookie('userId'); // userId з кукі (для перевірки)

        let navbarContent = '';

        // Різний навбар для учня, вчителя і гостей
        if (userRole === 'teacher') {
            navbarContent = `
                <div class="cover-container d-flex w-100 p-3 mx-auto flex-column">
                    <header class="mb-auto">
                        <div class="cover-container d-flex justify-content-between align-items-center">
                            <h3 class="float-md-start mb-0 text-dark">Contest-IT для Вчителів</h3>
                            <nav class="nav nav-masthead justify-content-center float-md-end">
                                <a class="nav-link fw-bold py-1 px-0 custom-nav-link text-dark" href="/html/create-comp.html">Додати Конкурс</a>
                                <a class="nav-link fw-bold py-1 px-0 custom-nav-link text-dark" href="/html/create-class.html">Створити клас</a>
                                <a class="nav-link fw-bold py-1 px-0 custom-nav-link text-dark" href="/php/news.php">Дописи</a>
                                <a class="nav-link fw-bold py-1 px-0 custom-nav-link text-dark" href="/html/teachers.html">Головна</a>
                                <a class="nav-link text-dark" href="about-dev.html">Про розробника</a>
                            </nav>
                        </div>
                        <hr>
                    </header>
                </div>
            `;
        } else if (userRole === 'student') {
            navbarContent = `
                <div class="cover-container d-flex w-100 p-3 mx-auto flex-column">
                    <header class="mb-auto">
                        <div class="cover-container d-flex justify-content-between align-items-center">
                            <h3 class="float-md-start mb-0 text-dark">Contest-IT для Учнів</h3>
                            <nav class="nav nav-masthead justify-content-center float-md-end">
                                <a class="nav-link fw-bold py-1 px-0 custom-nav-link text-dark" href="/html/enter-class.html">Вступити в Клас</a>
                                <a class="nav-link fw-bold py-1 px-0 custom-nav-link text-dark" href="/php/news.php">Дописи</a>
                                <a class="nav-link fw-bold py-1 px-0 custom-nav-link text-dark" href="/html/students.html">Головна</a>
                                <a class="nav-link text-dark" href="about-dev.html">Про розробника</a>
                            </nav>
                        </div>
                        <hr>
                    </header>
                </div>
            `;
        } else {
            navbarContent = `
                <div class="cover-container d-flex w-100 p-3 mx-auto flex-column">
                    <header class="mb-auto">
                        <div class="cover-container d-flex justify-content-between align-items-center">
                            <h3 class="float-md-start mb-0 text-dark">Contest-IT</h3>
                                <nav class="nav">
                                    <a class="nav-link text-dark" href="cover.html">Головна</a>
                                    <a class="nav-link text-dark" href="/php/news.php">Дописи</a>                   
                                        <div class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle text-dark" href="#" id="accountDropdown" role="button"
                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                Аккаунт
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="signup.html">Реєстрація</a></li>
                                                <li><a class="dropdown-item" href="signin.html">Вхід</a></li>
                                            </ul>
                                        </div>
                                    <a class="nav-link text-dark" href="about-dev.html">Про розробника</a>
                            </nav>
                        </div>
                        <hr>
                    </header>
                </div>
            `;
        }

        document.getElementById('navbar-container').innerHTML = navbarContent;
    </script>


        <style>
            td.name-cell {
                background-color: transparent;
                padding: 8px;
            }

            td.name-cell a {
                color: inherit;
                text-decoration: none;
            }

            .custom-nav-link {
                margin: 0 10px 0 10px;
            }

            .dropdown-menu .dropdown-item:hover,
            .dropdown-menu .dropdown-item:focus {
                color: #0077ff;
            }

            .carousel {
                width: 100%;
                margin-bottom: 4rem;
            }

            .carousel-caption {
                bottom: 3rem;
                z-index: 10;
            }

            .carousel-item {
                height: 45rem;
            }

            .table-custom tbody tr td,
            .table-custom tbody tr th {
                color: #333;
            }

            .table-competitions a {
                color: inherit;
                text-decoration: underline;
            }

            /* Додати межі для клітинок таблиці */
            #competitions-container table.table-bordered td,
            #competitions-container table.table-bordered th {
                border: 1px solid #333;
                /* Колір межі з Bootstrap */
            }

            .edit-btn {
                margin-right: 5px;
            }
        </style>

        <div class="container px-4 py-5" id="custom-cards">
            <h2 class="pb-2 border-bottom text-dark">Змагання</h2>

            <button id="changeViewButton" class="btn btn-primary mb-3">Змінити вигляд</button>

            <div class="container mb-4">
                <!-- Елементи сортування -->
                <div class="row mb-3">
                    <div class="col">
                        <label for="sortSelect">Сортувати за:</label>
                        <select id="sortSelect" class="form-select">
                            <option value="name">Назва</option>
                            <option value="startdate">Дата початку</option>
                            <option value="deadline">Кінцева дата</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="sortOrderSelect">Порядок:</label>
                        <select id="sortOrderSelect" class="form-select">
                            <option value="asc">Зростання</option>
                            <option value="desc">Спадання</option>
                        </select>
                    </div>
                </div>

                <!-- Фільтри за датою -->
                <div class="row mb-3">
                    <div class="col">
                        <label for="startDateFilter">Дата початку (від):</label>
                        <input type="date" id="startDateFilter" class="form-control">
                    </div>
                    <div class="col">
                        <label for="endDateFilter">Дата закінчення (до):</label>
                        <input type="date" id="endDateFilter" class="form-control">
                    </div>
                </div>

                <!-- Кнопка фільтрування -->
                <button id="applyFilterButton" class="btn btn-primary">Застосувати фільтри</button>
                <button id="resetFilterButton" class="btn btn-secondary ms-2">Скинути фільтри</button>
            </div>

            <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5" id="competitions-container">
                <!-- Тут будуть динамічні картки змагань -->
            </div>
        </div>

        <!-- Модальне вікно для підтвердження видалення -->
        <div class="modal fade" id="deleteConfirmationModal" tabindex="-1"
            aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteConfirmationModalLabel">Підтвердження видалення</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрити"></button>
                    </div>
                    <div class="modal-body">
                        Ви впевнені, що хочете видалити це змагання? Цю дію неможливо скасувати.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Скасувати</button>
                        <button type="button" class="btn btn-danger" id="confirmDeleteButton">Видалити</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="mt-auto text-dark-50">
            <p class="mt-5 mb-3 text-dark">&copy; 2024 Contest-IT. Бабяк Олексій. Всі права захищені</p>
        </footer>
    </div>

    <script src="/js/competitionsDisplay.js"></script>
</body>

</html>

